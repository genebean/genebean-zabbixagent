##################################################################
###################################################################
####
####        This file is managed by Puppet
####
####################################################################
####################################################################
###
#####################################################################
####
####   This section replaces /etc/zypp/repos.d/server_monitoring.repo
####
#####################################################################

<% if @operatingsystem == 'SLES' and @operatingsystemrelease.split('.')[-1] >= '1' %>
[server_monitoring]
name=Server Monitoring Software
enabled=1
autorefresh=0
baseurl=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_42.2/
type=rpm-md
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_42.2//repodata/repomd.xml.key

<% elsif @operatingsystem == 'SLES' and @operatingsystemrelease.split('.')[-1] == '0' %>
[server_monitoring]
name=Server Monitoring Software
enabled=1
autorefresh=0
baseurl=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_42.1/
type=rpm-md
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_42.1//repodata/repomd.xml.key

<% else @operatingsystemmajrelease == 42 %>
[server_monitoring]
name=Server Monitoring Software
type=rpm-md
baseurl=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_<%= @operatingsystemrelease %>/
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/home:/ecsos:/monitoring/openSUSE_Leap_<%= @operatingsystemrelease %>//repodata/repomd.xml.key
enabled=1
<% end %>
